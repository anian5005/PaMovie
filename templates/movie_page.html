<!DOCTYPE HTML>

<html>
<head>
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='img/pa_logo.ico')}}" >
    <meta charset="utf-8">
    <title>Pa Movie</title>
    <link rel="stylesheet"  href="{{url_for('static', filename='css/style.css')}}">
    <link rel="stylesheet"  type="text/css" href="{{url_for('static', filename='css/loading-bar.css')}}">
</head>

<BODY >
    <header>
        <nav>
            <a href="/">
                <img src="{{url_for('static', filename='img/word_logo-removebg-preview.png')}}" width="250px" display="inline" >
            </a>
<!--            <form method="get" action="https://tw.search.yahoo.com/search" target="_blank" >-->
<!--                <input id="serchinput" name="p" type="text" placeholder="搜尋" autocomplete="off">-->
<!--                <div class="inputex" style="visibility:hidden"></div>-->
<!--                <input type="hidden" id="fr" name="fr" value="ush-movies">-->
<!--            </form>-->
        </nav>
    </header>

    <div class="movie_info">
        <h1>{{zh_title}}</h1>
        <div class="info_body">
            <div class="photo">
                <img id='imdb_icon' src={{image}} width="200px">
            </div>
            <div class="info_detail">
                <p class="detail_word">原名 : {{movie}}</p>
                <p class="detail_word">導演 : {{dir}}</p>  
                <p class="detail_word">上映 : {{release_date}}</p>
                <p class="detail_word">片長 : {{runtime}} 分鐘</p>  
            </div>
        </div>
    </div>

    <div class="rating_container">
        <h1>Movie Ratings</h1>
    </div>
<script type="text/javascript" src="{{url_for('static', filename='js/movie_page.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='js/loading-bar.js')}}"></script>

    <script>
        var rating_dict = {{rating|tojson}};
        var imdb_score = rating_dict['imdb_score'];
        var imdb_count = rating_dict['imdb_count'];
        var tomato_meter = rating_dict['tomato_meter'];
        var tomato_audience = rating_dict['tomato_audience'];
        var tomato_review_count = rating_dict['tomato_review_count'];
        var tomato_audience_count = rating_dict['tomato_audience_count'];
        var yahoo_score = rating_dict['yahoo_score'];
        var yahoo_count = rating_dict['yahoo_count'];
        console.log('tomato_meter', tomato_meter)

            var result = 0
            if (imdb_score != null && imdb_score != 0) {
                result = result +1;
                create_imdb_rating('imdb', 'IMDb RATING', imdb_score, imdb_count)
            };
            if (tomato_meter != null && tomato_meter != 0) {
                result = result +1;
                create_imdb_rating('tomato', 'TOMATOMETER', tomato_meter, tomato_review_count)
            };
            if (tomato_audience != null && tomato_audience != 0) {
                result = result +1;
                create_imdb_rating('tomato_audience', 'AUDIENCE SCORE', tomato_audience, tomato_audience_count)
            };
            if (yahoo_score != null && yahoo_score != 0) {
                result = result +1;
                create_imdb_rating('yahoo', 'YAHOO SCORE', yahoo_score, yahoo_count)
            };
            if (result === 0) {
                var p_result= document.createElement('p');
                p_result.classList.add('rating_no_result');
                var p_result_text = document.createTextNode('Sorry no results found');
                p_result.appendChild(p_result_text);
                var position = document.getElementsByClassName('rating_container')[0];
                position.appendChild(p_result);
            }
    </script>
</BODY>











